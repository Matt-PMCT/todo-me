{# Subtask item partial - simplified row for subtask display #}
{# Expects: subtask (Task entity) #}

<div data-subtask-item
     data-subtask-id="{{ subtask.id }}"
     class="ml-9 py-2 flex items-center gap-3 border-l-2 border-gray-200 pl-4">
    {# Status checkbox #}
    {% if subtask.status == 'completed' %}
        <form action="{{ path('app_task_status', {id: subtask.id}) }}" method="POST" class="inline">
            <input type="hidden" name="_csrf_token" value="{{ csrf_token('task_status_' ~ subtask.id) }}">
            <input type="hidden" name="status" value="pending">
            <button type="submit" class="flex-shrink-0 min-h-11 min-w-11 sm:min-h-0 sm:min-w-0 h-5 w-5 sm:h-4 sm:w-4 rounded-full bg-green-500 flex items-center justify-center hover:bg-green-600 transition-colors" title="Mark as pending">
                <svg class="w-3 h-3 sm:w-2.5 sm:h-2.5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
            </button>
        </form>
    {% else %}
        <form action="{{ path('app_task_status', {id: subtask.id}) }}" method="POST" class="inline">
            <input type="hidden" name="_csrf_token" value="{{ csrf_token('task_status_' ~ subtask.id) }}">
            <input type="hidden" name="status" value="completed">
            <button type="submit" class="flex-shrink-0 min-h-11 min-w-11 sm:min-h-0 sm:min-w-0 h-5 w-5 sm:h-4 sm:w-4 rounded-full border-2 {% if subtask.status == 'in_progress' %}border-blue-500 bg-blue-50{% else %}border-gray-300{% endif %} hover:border-green-500 hover:bg-green-50 transition-colors" title="Mark as completed">
            </button>
        </form>
    {% endif %}

    {# Subtask title #}
    <span class="text-sm {% if subtask.status == 'completed' %}line-through text-gray-500{% else %}text-gray-700{% endif %} truncate flex-1">
        {{ subtask.title }}
    </span>

    {# Status badge #}
    {% if subtask.status == 'pending' %}
        <span class="inline-flex items-center rounded-full bg-yellow-100 px-2 py-0.5 text-xs font-medium text-yellow-800">
            Pending
        </span>
    {% elseif subtask.status == 'in_progress' %}
        <span class="inline-flex items-center rounded-full bg-blue-100 px-2 py-0.5 text-xs font-medium text-blue-800">
            In Progress
        </span>
    {% else %}
        <span class="inline-flex items-center rounded-full bg-green-100 px-2 py-0.5 text-xs font-medium text-green-800">
            Completed
        </span>
    {% endif %}
</div>
