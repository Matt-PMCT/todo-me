# Production Environment Configuration
# For Todo-Me Application deployed to https://pmct.work/todo-me/

###> symfony/framework-bundle ###
# Production mode with debug disabled
APP_ENV=prod
APP_DEBUG=0
# Generated secret (64 hex chars = 32 bytes)
APP_SECRET=7f8e9d4c2b1a6f5e3d9c8b7a6e5f4c3d
###< symfony/framework-bundle ###

###> doctrine/doctrine-bundle ###
# PostgreSQL connection for production
# Format: postgresql://user:password@host:port/database?serverVersion=15&charset=utf8
DATABASE_URL="postgresql://todo_user:secure_db_password_change_me@db:5432/todo_db?serverVersion=15&charset=utf8"
###< doctrine/doctrine-bundle ###

###> redis ###
# Redis connection with authentication (production required)
REDIS_URL="redis://:secure_redis_password_change_me@redis:6379"
REDIS_PASSWORD=secure_redis_password_change_me
###< redis ###

###> nelmio/cors-bundle ###
# Only allow pmct.work domain in production
CORS_ALLOW_ORIGIN='^https://pmct\.work$'
###< nelmio/cors-bundle ###

###> symfony/routing ###
# Default URI for CLI commands

# If deploying to a subdirectory (e.g., behind reverse proxy at /todo-me/),
# set this to the path prefix so Symfony generates correct URLs for routing,
# assets, and redirects. Leave empty for root deployment.
APP_PATH_PREFIX=/todo-me
DEFAULT_URI=https://pmct.work/todo-me
###< symfony/routing ###

###> symfony/mailer ###
# Pairserver SMTP configuration (port 465 = SMTPS)
# Credentials: outtraffic@vlogdev.com
# URL-encoded @ = %40
MAILER_DSN=smtp://outtraffic%40vlogdev.com:faction-eccentric-wronged-roast-dicing-devotee@vlogdev.mail.pairserver.com:465
MAIL_FROM_ADDRESS=outtraffic@vlogdev.com
MAIL_FROM_NAME="Todo-Me"
# Application URL for generating email links
APP_URL=https://pmct.work/todo-me
###< symfony/mailer ###

###> api configuration ###
# API token lifetime in hours
API_TOKEN_TTL_HOURS=48
###< api configuration ###

###> symfony/messenger ###
# Redis stream transport for async message processing
MESSENGER_TRANSPORT_DSN=redis://:secure_redis_password_change_me@redis:6379/messages
###< symfony/messenger ###

###> push notifications (VAPID) ###
# Generate with: docker compose -f docker/docker-compose.yml exec php vendor/bin/generate-vapid-keys
VAPID_PUBLIC_KEY=
VAPID_PRIVATE_KEY=
VAPID_SUBJECT=mailto:admin@example.com
###< push notifications ###

###> proxy configuration ###
# Nginx reverse proxy at pmct.work
TRUSTED_PROXIES=127.0.0.1
###< proxy configuration ###
